# == ТИПЫ ДАННЫХ ==

CoffeeScript поддерживает числа, строки, массивы, объекты, и специальные типы данных: Дату(и время) и функции.

## == ПРОВЕРКА ТИПА ==

Чтобы проверить тип значения используется оператор `typeof`

```coffee-script
typeof 1
typeof "bar"
```

## == ЧИСЛА ==

CoffeeScript не делает различия между целыми и дробными числами. 
Все числа имеют тип `number`

### == ПРИМЕРЫ ==

```coffee-script
a = 10
b = 30
z = 12.5 + a # число с плавающей точкой
# с экспонентой
e = 1.5e-5 # 1.5*10^(-5) = 0.000015
```
 
### == ЧИСЛОВЫЕ ОПЕРАТОРЫ ==

Могут быть бинарными или унарнымы. Бинарные применяются **к двум** операндам,
унарные к **одному**.

| оператор | название | тип | пример | пояснение |
|:--------:|:--------:|:----:|:-------:|:----------|
| `++` | инкремент | унарный | `k++` | увеличивает значение на 1 |
| `--`| декремент| унарный | `i--` | уменьшает значение на 1|
| `+` | сложение | бинарный | `4 + 5` | сложить 2 операнда |
| `-`| вычитание| бинарный | `2 - 17`| вычесть 2й операнд из первого |
| `*`| умножение | бинарный | `2 * 2` | перемножить два операнда |
| `/`| деление | бинарный | `25 / 5` | разделить 1й операнд на 2й |
| `%`| деление нацело | бинарный | `25 % 4` | остаток от целочисленного деления 1го операнда на 2й (в примере будет `1`) |

С помощью круглых скобок `(` `)` можно менять приоритет операций:
```coffee-script
2 + 2 * 2     # 6
(2 + 2) * 2   # 8
```

### == ПРИМЕРЫ == 

```coffee-script
x = 10
y = x * 5
y++
z = y - 14
console.log z
```

## == СТРОКИ ==

Последовательность символов в одинарных `'` или двойных кавычках `"`.

Многострочный текст записывается между трех двойных кавычек `"""`.

В строки с двойными кавычками можно вставлять значения.

Каждая строка имеет длину (`.length`).

К симоволам строки можно обратиться отдельно по индексу через оператор `[` `]`. Нумерация начинается с `0`.

Чтобы вставить значение переменной в строку используется оператор `#{` `}` (см. пример). 
Оператор `#{` `}` можно использовать **только в двойных кавычках**.


### == ПРИМЕРЫ ==

```coffee-script
str_one   = 'одинарная кавычка'
str_two   = "двойная кавычка"
str_three = "текст в 'кавычках'"
long_str  = """
многострочный текст
идет в тройных кавычках
"""

# .length - длина строки
console.log str_one.length 

# индекс
console.log str_one[2]          # 3я буква


a = 12
b = a + 5
console.log "a = #{a}, b = #{b}"

```

## == ЛОГИЧЕСКИЙ ТИП ==

Представляет собой значение одного из типов

|  истина  |   ложь  |
|:---------:|:-------:|
|  `true`   | `false` |
|  `yes`    |  `no`   |
|  `on`     |  `off`  |

Применяется в основном в блоках условия. Является результатом применения
сравнительных/логических операций.

### == СРАВНИТЕЛЬНЫЕ/ЛОГИЧЕСКИЕ ОПЕРАЦИИ ==

| оператор | название | тип | пример | пояснение |
|:--------:|:--------:|:----:|:-------:|:----------|
| `and`  | логическое "и" | бинарный | `a and b` | `true` только если `a` и `b` `true`|
| `or` | логическое "или" | бинарный | `a or  b` | `false` только если `a` и `b` `false`|
| `not` | отрицание | унарный | `not a` | меняет значение `true` <-> `false` |
| `is`  | равенство | бинарный | `a is b` | синоним: `==` |
| `isnt` | неравенство | бинарный | `a isnt b` | синоним: `!=` |
| `<`    | меньше | бинарный |  `a < b` | |
| `>`    | больше | бинарный |   `a > b`| |
| `<=`   | меньше или равно | бинарный |  `a <= b` | |
| `>=`   | больше или равно | бинарный |  `a >= b` | |
| `in`   | включает | бинарный |  `a in b` | элемент `a` содержится в множестве `b` |

Могут групироваться `(` `)` так же, как операторы для чисел.

```coffee-script
b_tr = yes
b_fl = no

(b_fl or b_tr) and (not b_fl)
```

## == МАССИВЫ ==

Множества значений заключеные в `[` `]` и разделённые запятыми. 

Могут содержать любые типы данных, включая вложенные массивы

Индексируются так же, как и строками, начиная с 0 элемента.

Имеют длину (`.length`).

### == ИЗМЕНЕНИЕ ==

Для добавления/удаления элементов используй встроенные функции

| функция | пример | описание |
|:--------:|:-------:|:---------|
| unshift | `x.unshift 5` | добавление в начало |
| push    | `x.push 7` | добавление в конец |
| shift   | `x.shift()` | удаление с начала. возвращает удаленный элемент |
| pop     | `x.pop()` | удаление с конца. возвращает удаленный элемент |

### == КОПИРОВАНИЕ ==

Чтобы копировать часть массива ипользуй оператор `[S..E]`, где

 - `S` - индекс с которого начинается копирование (**число**)
 - `E` - индекс на котором оканчивается копирование (**число**)

если `S` не указана, ипользуется `0` (первый символ)
если `E` не указана, ипользуется `-1` (последний символ)



### == ПРИМЕРЫ ==

```coffee-script
digit_arr   = [1,2,3,4]
sarr        = ["a", "b", "z"]
complex_arr = ["str", -3.4, [23, 64]]

# пустой массив
empty       = []

# вывести bar:
console.log "#{sarr[1]}#{sarr[0]}#{sarr[1]}"

digit_arr.length is 4       # дает true
 
#

cp_arr  = [1..-1]         # [2,3]
cp_sarr = [..]            # ["a", "b", "z"]
# -----------------------------------------
# ## добавление / удаление элементов

test_arr = [1,2,3]
test_arr.push 0
x = test_arr.pop()
test_arr.unshift x

# вывести 0,1,2,3
console.log "test arr = #{test_arr}"
```

## == ОБЪЕКТЫ ==

Множества пар `ключ-значение` заключеные в `{` `}` и разделённые запятыми. 

В качестве ключа обычно используются строки, а качестве значений - любые данные, включая объекты.

Доступ к значениям осуществляется по ключу через `[` `]`

Есть специальный объект `null` который будет выдавать ошибку для любого ключа.

Чтобы удалить ключ (и значение) используется оператор `delete`.

`JSON.stringify` преобразует любой объект в строку (представление `json`)

```coffee-script
o = {}
o2 =
  key1: "v1"             #  отступ важен
  key2: 3
o3 = val: [1,3,5], name: "graph", order: 1
   
# доступ к элементам 
o3["name"] = "bar"

# удаление ключа order
delete o3.order
 
# объект не имеет длины. чтобы вывести
# все значения используется вызов:

console.log "#{JSON.stringify o3, null, 2}"

# специальный объект null
m = null
# обращение к любому ключу
# вызывает ошибку

```

## == ДАТА/ВРЕМЯ ==

Специальный объект для хранения даты и времени.
Время хранится с учетом часового пояса.

### == ХРАНЕНИЕ ДАТЫ ==

| обычный формат | `unixtime` |
|:----------------:|:--------:|
| `d = new Date`   | `d = Date.now` |

Формат `unixtime` - это число миллисекунд, прошедших с 1 января 1970 г.
Обычный формат имеет функции для доступа к частям даты и времени.

### == ФУНКЦИИ DATE ==

| функция| описание  |
|:-------:|:------:|
| `d.getFullYear()`  | получить год |
| `d.getMonth()`     | получить номер месяца (с 0) |
| `d.getDate()`      | получить число месяца |
| `d.getHours()`     | получить час |
| `d.getMinutes()`   | получить минуту |
| `d.getSeconds()`   | получить секунду |
| `d.getDay()`       | получить день недели (с вс) |

### == ПРИМЕР ==

```coffee-script
# создать новую дату из unixtime
d  = new Date # текущая дата и время
d2 = Date.now # текущая дата и время в unixtime
d3 = new Date 1372838636307 # дата из unixtime

# разница между датами в миллисекундах
delta_d = d - d3

days = ["воскресенье", "понедельник", "вторник", "среда", "четверг", "пятница", "суббота"]
console.log "сегодня #{days[d.getDay()]}"
``` 

